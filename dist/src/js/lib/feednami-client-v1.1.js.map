{"version":3,"sources":["../../../../src/js/lib/feednami-client-v1.1.js"],"names":["_typeof","Symbol","iterator","obj","constructor","_classCallCheck","instance","Constructor","TypeError","FeednamiClientRequest","client","url","options","callback","prototype","run","_this","window","send","then","data","error","Error","message","code","Promise","reject","feed","resolve","endpoint","feednamiEndpoint","apiRoot","feedUrl","qs","encodeURIComponent","publicApiKey","format","includeXml","fetch","res","json","XDomainRequest","script","document","createElement","callbackName","Date","getTime","Math","round","random","body","removeChild","e","src","appendChild","req","XMLHttpRequest","onreadystatechange","readyState","JSON","parse","responseText","open","FeednamiClient","promisePolyfillCallbacks","promiseLoaded","loadPolyfills","push","polyfillScriptsAdded","head","loadPromiseCallback","_iterator","_isArray","Array","isArray","_i","_ref","length","next","done","value","console","log","load","request","loadGoogleFormat","feednami","setPublicApiKey","key"],"mappings":"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","file":"feednami-client-v1.1.js","sourcesContent":["'use strict'; var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol?'symbol':typeof obj};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}(function(){var FeednamiClientRequest=function(){function FeednamiClientRequest(client,url,options,callback){_classCallCheck(this,FeednamiClientRequest);this.client=client;this.url=url;this.options=options||{};this.callback=callback}FeednamiClientRequest.prototype.run=function run(){var _this=this;if(!this.callback){if('fetch'in window){return this.send().then(function(data){if(data.error){var error=new Error(data.error.message);error.code=data.error.code;return Promise.reject(error)}return data.feed})}return new Promise(function(resolve,reject){_this.send(function(data){if(data.error){var error=new Error(data.error.message);error.code=data.error.code;reject(error)}else{resolve(data.feed)}})})}else{this.send(this.callback)}};FeednamiClientRequest.prototype.send=function send(callback){var endpoint=window.feednamiEndpoint||'https://api.feednami.com';var apiRoot=endpoint+'/api/v1.1';var feedUrl=this.url;var options=this.options;var qs='url='+encodeURIComponent(feedUrl);if(this.client.publicApiKey){qs+='&public_api_key='+this.client.publicApiKey}if(options.format){qs+='&include_xml_document&format='+options.format}if(options.includeXml){qs+='&include_xml_document'}var url=apiRoot+'/feeds/load?'+qs;if('fetch'in window){return fetch(url).then(function(res){return res.json()}).then(function(data){if(callback){callback(data)}return data})}else if(window.XDomainRequest){(function(){var script=document.createElement('script');var callbackName='jsonp_callback_'+new Date().getTime()+'_'+Math.round(1000000*Math.random());url+='&jsonp_callback='+callbackName;window[callbackName]=function(data){callback(data);document.body.removeChild(script);window[callbackName]=null;try{delete window[callbackName]}catch(e){}};script.src=url;document.body.appendChild(script)})()}else{(function(){var req=new XMLHttpRequest;req.onreadystatechange=function(){if(req.readyState==4){callback(JSON.parse(req.responseText))}};req.open('GET',url);req.send()})()}};return FeednamiClientRequest}();var FeednamiClient=function(){function FeednamiClient(){_classCallCheck(this,FeednamiClient);this.promisePolyfillCallbacks=[];this.promiseLoaded='Promise'in window}FeednamiClient.prototype.loadPolyfills=function loadPolyfills(callback){if(this.promiseLoaded){callback()}else{this.promisePolyfillCallbacks.push(callback);if(!this.polyfillScriptsAdded){this.polyfillScriptsAdded=true;var script=document.createElement('script');script.src='https://feednami-static.storage.googleapis.com/js/v1.1/promise.js';document.head.appendChild(script)}}};FeednamiClient.prototype.loadPromiseCallback=function loadPromiseCallback(){this.promiseLoaded=true;for(var _iterator=this.promisePolyfillCallbacks,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value}var callback=_ref;console.log(callback);callback()}};FeednamiClient.prototype.load=function load(url,options,callback){if((typeof url==='undefined'?'undefined':_typeof(url))=='object'){return this.load(options.url,options,callback)}if(typeof options=='function'){return this.load(url,{},options)}var request=new FeednamiClientRequest(this,url,options,callback);return request.run()};FeednamiClient.prototype.loadGoogleFormat=function loadGoogleFormat(url,callback){return feednami.load(url,{format:'google',includeXml:true},callback)};FeednamiClient.prototype.setPublicApiKey=function setPublicApiKey(key){this.publicApiKey=key};return FeednamiClient}();window.feednami=new FeednamiClient})();"]}