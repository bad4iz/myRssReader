{"version":3,"sources":["../../../src/js/app.js"],"names":["FeedListView","fileId","msgAlert","document","getElementById","arr","Array","isArray","Error","hasChildNodes","removeChild","lastChild","div","createElement","className","forEach","buttonIsUnsubscribe","type","value","appendChild","item","view","onclick","feedsCollection","deleteFeed","feedListView","FeedView","element","console","log","author","elm","FeedsView","textarea","feedsItem","ItemFeed","obj","id","title","description","pubDate","pubdate_ms","link","isRead","idFeedModel","a","inputIsRead","dataPubl","textContent","createTextNode","href","h2","FeedModel","url","test","rssUrl","_feedsItem","isUnsubscribe","Promise","resolve","reject","feednami","load","result","error","entries","feed","feedsPromise","getFeedRssPromis","then","items","push","innerHTML","p","FeedsCollection","feeds","feedsView","fn","sort","index","indexOf","splice","redesign","concat","visibleAllFeeds","rssFeed","feedsPromis","e","name","message","ButtonAddController","addRssButton","textRss","ButtonRssController","rss","_flagVisible","click","textButton","context","flagVisible","ButtonSortTitle","buttonSortTitle","sortTitle","one","two","ButtonSortDatePubl","buttonSortDatePubl","sortDatePubl","buttonAddFeeds","buttonRss"],"mappings":"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","file":"app.js","sourcesContent":["///////////////////////////////////////////////////\r\n//\r\n//   Views\r\n//\r\n////////////////////////////////////////////////////\r\n/**\r\n * показ списка подписок\r\n */\r\nclass FeedListView {\r\n  constructor(fileId) {\r\n    this.msgAlert = document.getElementById(fileId);\r\n  }\r\n  \r\n  view(arr) {\r\n    if (!Array.isArray(arr)) {\r\n      throw new Error('не массив!');\r\n    }\r\n    while (this.msgAlert.hasChildNodes()) {\r\n      this.msgAlert.removeChild(this.msgAlert.lastChild);\r\n    }\r\n    let div = document.createElement('div');\r\n    div.className = \"FeedsView\";\r\n    arr.forEach(item => {\r\n      let div = document.createElement('div');\r\n      div.className = 'urlFeed';\r\n      let buttonIsUnsubscribe = document.createElement('input');\r\n      buttonIsUnsubscribe.type = 'button';\r\n      buttonIsUnsubscribe.value = 'удалить подписку';\r\n      div.appendChild(item.view());\r\n      buttonIsUnsubscribe.onclick = function() {\r\n        const msgAlert = document.getElementById('msgAlert');\r\n        msgAlert.removeChild(div);\r\n        feedsCollection.deleteFeed(item);\r\n      };\r\n      div.appendChild(buttonIsUnsubscribe);\r\n      this.msgAlert.appendChild(div);\r\n    });\r\n  }\r\n}\r\n\r\nlet feedListView = new FeedListView('msgAlert');\r\n\r\nclass FeedView {\r\n  constructor(item) {\r\n    this.element = 'div';\r\n    console.log(item.author);\r\n  }\r\n  \r\n  view() {\r\n    let elm = document.createElement(this.element);\r\n  }\r\n}\r\n\r\nclass FeedsView {\r\n  constructor() {\r\n    this.textarea = document.getElementById('textarea');\r\n  }\r\n  \r\n  view(feedsItem) {\r\n    feedsItem.forEach(item => this.textarea.appendChild(item.view()));\r\n  }\r\n}\r\n\r\n///////////////////////////////////////////////////\r\n//    Models\r\n////////////////////////////////////////////////////\r\n\r\nclass ItemFeed {\r\n  constructor(obj) {\r\n    this.id = ItemFeed.id++;\r\n    this.title = obj.title;\r\n    this.description = obj.description;\r\n    this.pubDate = obj.pubDate;\r\n    this.pubdate_ms = obj.pubdate_ms;\r\n    this.author = obj.author;\r\n    this.link = obj.link;\r\n    this.isRead = false;\r\n    this.idFeedModel = obj.idFeedModel;\r\n  }\r\n  \r\n  read() {\r\n    this.isRead = !this.isRead;\r\n    return this.isRead;\r\n  }\r\n  \r\n  view() {\r\n    let div = document.createElement('div');\r\n    let a = document.createElement('a');\r\n    let inputIsRead = document.createElement('input');\r\n    inputIsRead.type = 'checkbox';\r\n    let dataPubl = document.createElement('p');\r\n    let description = document.createElement('p');\r\n    description.textContent = this.description;\r\n    dataPubl.appendChild(document.createTextNode(this.pubDate));\r\n    a.href = this.link;\r\n    let h2 = document.createElement('h2');\r\n    h2.appendChild(document.createTextNode(this.title));\r\n    a.appendChild(h2);\r\n    div.appendChild(dataPubl);\r\n    div.appendChild(a);\r\n    div.appendChild(description);\r\n    div.appendChild(inputIsRead);\r\n    return div;\r\n  }\r\n}\r\nItemFeed.id = 0;\r\n\r\nclass FeedModel {\r\n  constructor(url) {\r\n    if (/^http/i.test(url)) {\r\n      this.idFeedModel = FeedModel.id++;\r\n      this.rssUrl = url;\r\n      this._feedsItem = [];\r\n      // this.feedsPromis();\r\n      this.isUnsubscribe = false;\r\n    } else {\r\n      throw new Error('не содержит урл!');\r\n    }\r\n  }\r\n  \r\n  getFeedRssPromis() {\r\n    return new Promise((resolve, reject) => {\r\n      feednami.load(this.rssUrl, function(result) {\r\n        if (result.error) {\r\n          reject(result.error);\r\n        }\r\n        else {\r\n          let entries = result.feed.entries;\r\n          resolve(entries);\r\n        }\r\n      })\r\n    });\r\n  }\r\n  \r\n  feedsPromis() {\r\n    return new Promise((resolve, reject) => {\r\n      let feedsPromise = this.getFeedRssPromis();\r\n      feedsPromise\r\n      .then(\r\n         items => {\r\n           for (let item of items) {\r\n             item.idFeedModel = this.idFeedModel;\r\n             this._feedsItem.push(new ItemFeed(item));\r\n           }\r\n           resolve(true);\r\n         },\r\n         error => {\r\n           console.log(\"Ошибка: \" + error);\r\n           msgAlert.innerHTML = \"Ошибка: Проверте адресс! Скорей всего он не правильный \"; // error - аргумент reject\r\n           reject(result.error);\r\n         }\r\n      );\r\n    });\r\n  }\r\n  \r\n  get feeds() {\r\n    return this._feedsItem;\r\n  }\r\n  \r\n  get url() {\r\n    return this.rssUrl;\r\n  }\r\n  \r\n  unsubscribe() {\r\n    this.isUnsubscribe = !this.isUnsubscribe;\r\n    return this.isUnsubscribe;\r\n  }\r\n  \r\n  view() {\r\n    let p = document.createElement('p');\r\n    p.appendChild(document.createTextNode(this.url));\r\n    return p;\r\n  }\r\n}\r\nFeedModel.id = 0;\r\n///////////////////////////////////////\r\n//       Collections\r\n//////////////////////////////////////\r\n\r\nclass FeedsCollection {\r\n  constructor() {\r\n    this.feeds = [];\r\n    this.feedsItem = [];\r\n    this.feedsView = (new FeedsView());\r\n    \r\n  }\r\n  \r\n  set feed(rssFeed) {\r\n    if (rssFeed instanceof FeedModel) {\r\n      let feedsPromise = rssFeed.feedsPromis();\r\n      feedsPromise\r\n      .then(() => {\r\n        this.feeds.push(rssFeed);\r\n        this.feedsItem = this.feedsItem.concat(rssFeed.feeds);\r\n        this.visibleAllFeeds();\r\n      });\r\n    } else {\r\n      throw new Error('неправильный класс!');\r\n    }\r\n  }\r\n  \r\n  get feed() {\r\n    return this.feeds;\r\n  }\r\n  \r\n  visibleAllFeeds(fn) {\r\n    if (typeof fn !== \"function\") {\r\n      fn = ''\r\n    }\r\n    while (textarea.hasChildNodes()) {\r\n      textarea.removeChild(textarea.lastChild);\r\n    }\r\n    this.feedsView.view(this.feedsItem.sort(fn));\r\n  }\r\n  \r\n  deleteFeed(feed) {\r\n    if (!(feed instanceof FeedModel)) {\r\n      throw new Error('неправильный класс!');\r\n    }\r\n    let index = this.feeds.indexOf(feed);\r\n    if (index === -1) {\r\n      console.error(\"нет такого элемента\");\r\n      return\r\n    }\r\n    this.feeds.splice(index, 1);\r\n    this.redesign();\r\n    console.log(\"объект удален\")\r\n  }\r\n  \r\n  redesign() {\r\n    this.feedsItem = [];\r\n    this.feeds.forEach(item => this.feedsItem = this.feedsItem.concat(item.feeds));\r\n    this.visibleAllFeeds();\r\n  }\r\n  \r\n  setfeedsItem(arr) {\r\n    if (!Array.isArray(arr)) {\r\n      console.error(\"передали в feedsItem не массив\");\r\n      return;\r\n    }\r\n    this.feedsItem = this.feedsItem.concat(arr);\r\n  }\r\n  \r\n  view() {\r\n    console.log('FeedsCollection')\r\n  }\r\n}\r\n\r\nlet feedsCollection = new FeedsCollection();\r\ntry {\r\n  let a = new FeedModel('http://lenta.ru/rss/last24');\r\n  feedsCollection.feed = new FeedModel('http://4pda.ru/feed/rss');\r\n  feedsCollection.feed = new FeedModel('https://www.liteforex.ru/rss/company-news/');\r\n  feedsCollection.feed = a;\r\n} catch (e) {\r\n  console.log(e.name + ': ' + e.message);\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////\r\n//    Controllers\r\n////////////////////////////////////////////////////\r\n\r\n/**\r\n * кнопка добавление рсс ленты\r\n * @constructor\r\n */\r\nclass ButtonAddController {\r\n  constructor() {\r\n    const addRssButton = document.getElementById('addRssButton');\r\n    const textRss = document.getElementById('rssText');\r\n    \r\n    addRssButton.onclick = function() {\r\n      feedsCollection.feed = new FeedModel(textRss.value);\r\n      textRss.value = '';\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * кнопка показать ленты\r\n *\r\n * @constructor\r\n */\r\nclass ButtonRssController {\r\n  constructor() {\r\n    const rss = document.getElementById('rss');\r\n    const textRss = rss.textContent;\r\n    const msgAlert = document.getElementById('msgAlert');\r\n    this._flagVisible = false;\r\n    rss.onclick = this.click(textRss, this);\r\n  }\r\n  \r\n  click(textButton, context) {\r\n    return function() {\r\n      if (!context.flagVisible) {\r\n        while (msgAlert.hasChildNodes()) {\r\n          msgAlert.removeChild(msgAlert.lastChild);\r\n          rss.textContent = textButton;\r\n        }\r\n      } else {\r\n        feedListView.view(feedsCollection.feed);\r\n        rss.textContent = \"скрыть\";\r\n      }\r\n    };\r\n  }\r\n  \r\n  get flagVisible() {\r\n    this._flagVisible = !this._flagVisible;\r\n    return this._flagVisible;\r\n  }\r\n}\r\n/**\r\n *  кнопка сортировки по названию\r\n */\r\nclass ButtonSortTitle {\r\n  constructor() {\r\n    const buttonSortTitle = document.getElementById('rssButtonSortTitle');\r\n    const textarea = document.getElementById('textarea');\r\n    buttonSortTitle.onclick = function() {\r\n      while (textarea.hasChildNodes()) {\r\n        textarea.removeChild(textarea.lastChild);\r\n      }\r\n      \r\n      let sortTitle = function(one, two) {\r\n        if (two.title < one.title) {\r\n          return -1;\r\n        } else if (two.title > one.title) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      };\r\n      feedsCollection.visibleAllFeeds(sortTitle)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n *  кнопка сортировки по дате публикации\r\n */\r\nclass ButtonSortDatePubl {\r\n  constructor() {\r\n    const buttonSortDatePubl = document.getElementById('rssButtonSortDatePubl');\r\n    const textarea = document.getElementById('textarea');\r\n    buttonSortDatePubl.onclick = function() {\r\n      while (textarea.hasChildNodes()) {\r\n        textarea.removeChild(textarea.lastChild);\r\n      }\r\n      let sortDatePubl = function(one, two) {\r\n        return two.pubdate_ms - one.pubdate_ms;\r\n      };\r\n      feedsCollection.visibleAllFeeds(sortDatePubl);\r\n    }\r\n  }\r\n}\r\n\r\n\r\nlet buttonAddFeeds = new ButtonAddController();\r\nlet buttonRss = new ButtonRssController();\r\nlet buttonSortTitle = new ButtonSortTitle();\r\nlet buttonSortDatePubl = new ButtonSortDatePubl();\r\n/////////////////////////////////////////////////////\r\n"]}